<script>
	function goBack() {
	  if (history.length != 1) {
	    return window.history.back();
	  } else {
	    return window.location.pathname = '/';
	  }
	};
</script>
<li id="micropost-<%= micropost.id %>" %>>
	<%= link_to gravatar_for(micropost.user, size: 50), micropost.user %>
	<span class="user"><%= link_to micropost.user.name, micropost.user %></span>
	<span class="content">
		<%= micropost.content %>
		<%= image_tag micropost.picture.url if micropost.picture? %>
	</span>
	<span class="timestamp">
		Posted <%= time_ago_in_words(micropost.created_at) %> ago.
	</span>
	<% if current_page?(root_url)|| current_page?(user_path) %>
		<span><%= pluralize(micropost.comments.count, 'comment')%> | </span>
		<%= link_to 'comment', micropost  %>
	<% else %>
		<a style="cursor: pointer" onclick="goBack()">back</a>
	<%end%>
	<% if current_user?(micropost.user) %>
		<span> | </span>
		<%= link_to 'delete', micropost, method: :delete, data: { confirm: "Are you sure?" } %>
	<% end %>
	<% if micropost.comments.any? && !current_page?(micropost_path(micropost.id)) %>
		<%= render micropost.comments.first, @comments %>
	<% end %>
</li>
